@page "/"

@using SeamlessEscapesBlazor.Data 

<EditForm Model="@bookingRequest">
    <div class="form-group">
        <label for="departure">Departure Date:</label>
        <InputDate id="departure" @bind-Value="bookingRequest.DepartureDate" min="@today" />
    </div>
    <div class="form-group">
        <label for="arrival">Arrival Date:</label>
        <InputDate id="arrival" @bind-Value="bookingRequest.ArrivalDate" />
    </div>
    <div class="form-group">
        <label for="source">Source City:</label>
        <select id="source" @bind="bookingRequest.SourceCity">
            <option value="">Select Source City</option>
            @foreach (var airport in Airports)
            {
                <option value="@airport.Code">@airport.Name (@airport.Code)</option>
            }
        </select>
    </div>
    <div class="form-group">
        <label for="destination">Destination City:</label>
        <select id="destination" @bind="bookingRequest.DestinationCity">
            <option value="">Select Destination City</option>
            @foreach (var airport in Airports)
            {
                <option value="@airport.Code">@airport.Name (@airport.Code)</option>
            }
        </select>
    </div>
    <div class="form-group">
        <label for="people">Number of People:</label>
        <InputNumber id="people" @bind-Value="bookingRequest.NumberOfPeople" min="1" />
    </div>
    <div class="form-group">
        <label for="transport">Mode of Transport:</label>
        <InputSelect id="transport" @bind-Value="bookingRequest.TransportMode">
            <option value="Flight">Flight</option>
            <option value="Road">Road</option>
        </InputSelect>
    </div>
    <div class="form-group">
        <label for="interests">Interests:</label>
        <InputText id="interests" @bind-Value="bookingRequest.Interests" />
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</EditForm>

@code {
    private BookingRequest bookingRequest = new BookingRequest();
    private string today = DateTime.Now.ToString("yyyy-MM-dd");

    public class BookingRequest
    {
        public DateTime DepartureDate { get; set; } = DateTime.Now;
        public DateTime ArrivalDate { get; set; } = DateTime.Now.AddDays(1);
        public string SourceCity { get; set; }
        public string DestinationCity { get; set; }
        public int NumberOfPeople { get; set; }
        public string TransportMode { get; set; }
        public string Interests { get; set; }
    }

    private List<AirportInfo> Airports { get; set; }

    protected override void OnInitialized()
    {
        Airports = AirportData.GetAirports();
    }
}
